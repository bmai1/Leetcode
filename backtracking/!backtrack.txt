pretty similar to brute force, with recursion to not check all paths